<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gradle | Mflyyou</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="张攀钦的笔记">
    <meta name="theme-color" content="#3eaf7c">
    
    <link rel="preload" href="/assets/css/0.styles.0ce27dc8.css" as="style"><link rel="preload" href="/assets/js/app.c876b023.js" as="script"><link rel="preload" href="/assets/js/5.f1c50b28.js" as="script"><link rel="preload" href="/assets/js/2.85c620a8.js" as="script"><link rel="preload" href="/assets/js/10.9d78016d.js" as="script"><link rel="preload" href="/assets/js/11.66cb8558.js" as="script"><link rel="prefetch" href="/assets/js/100.d3ccb03a.js"><link rel="prefetch" href="/assets/js/101.db6336a9.js"><link rel="prefetch" href="/assets/js/102.dff088bb.js"><link rel="prefetch" href="/assets/js/103.87b5352b.js"><link rel="prefetch" href="/assets/js/104.e7e828d9.js"><link rel="prefetch" href="/assets/js/105.a0308ea1.js"><link rel="prefetch" href="/assets/js/106.7da8a737.js"><link rel="prefetch" href="/assets/js/12.2e1232ac.js"><link rel="prefetch" href="/assets/js/13.1fa48f49.js"><link rel="prefetch" href="/assets/js/14.88c327e5.js"><link rel="prefetch" href="/assets/js/15.886666ee.js"><link rel="prefetch" href="/assets/js/16.ff3aceaf.js"><link rel="prefetch" href="/assets/js/17.eadbe78e.js"><link rel="prefetch" href="/assets/js/18.cd8f2138.js"><link rel="prefetch" href="/assets/js/19.b44d07c7.js"><link rel="prefetch" href="/assets/js/20.74e35385.js"><link rel="prefetch" href="/assets/js/21.765405a2.js"><link rel="prefetch" href="/assets/js/22.2f152ee9.js"><link rel="prefetch" href="/assets/js/23.ac30fbae.js"><link rel="prefetch" href="/assets/js/24.711f90e7.js"><link rel="prefetch" href="/assets/js/25.d3d81640.js"><link rel="prefetch" href="/assets/js/26.95e73776.js"><link rel="prefetch" href="/assets/js/27.6a6bee8c.js"><link rel="prefetch" href="/assets/js/28.c23d3233.js"><link rel="prefetch" href="/assets/js/29.e7f501b7.js"><link rel="prefetch" href="/assets/js/3.fd75c0a5.js"><link rel="prefetch" href="/assets/js/30.160d973d.js"><link rel="prefetch" href="/assets/js/31.62e9ec91.js"><link rel="prefetch" href="/assets/js/32.63450723.js"><link rel="prefetch" href="/assets/js/33.6a9fe332.js"><link rel="prefetch" href="/assets/js/34.dc78c409.js"><link rel="prefetch" href="/assets/js/35.819eb997.js"><link rel="prefetch" href="/assets/js/36.6f0dd57b.js"><link rel="prefetch" href="/assets/js/37.97cff2db.js"><link rel="prefetch" href="/assets/js/38.42474606.js"><link rel="prefetch" href="/assets/js/39.22279c24.js"><link rel="prefetch" href="/assets/js/4.1d7c8e50.js"><link rel="prefetch" href="/assets/js/40.c79b3ee7.js"><link rel="prefetch" href="/assets/js/41.95abde40.js"><link rel="prefetch" href="/assets/js/42.1a49cfd4.js"><link rel="prefetch" href="/assets/js/43.d4322a35.js"><link rel="prefetch" href="/assets/js/44.d7f9ac42.js"><link rel="prefetch" href="/assets/js/45.531ba324.js"><link rel="prefetch" href="/assets/js/46.0ae453bf.js"><link rel="prefetch" href="/assets/js/47.5c18d38d.js"><link rel="prefetch" href="/assets/js/48.4df5e318.js"><link rel="prefetch" href="/assets/js/49.faafeee6.js"><link rel="prefetch" href="/assets/js/50.dc72e991.js"><link rel="prefetch" href="/assets/js/51.da69b59a.js"><link rel="prefetch" href="/assets/js/52.18528bef.js"><link rel="prefetch" href="/assets/js/53.090cfc3f.js"><link rel="prefetch" href="/assets/js/54.87b885f3.js"><link rel="prefetch" href="/assets/js/55.d191ddc1.js"><link rel="prefetch" href="/assets/js/56.1f5db295.js"><link rel="prefetch" href="/assets/js/57.4668a9cd.js"><link rel="prefetch" href="/assets/js/58.2459bcea.js"><link rel="prefetch" href="/assets/js/59.45048184.js"><link rel="prefetch" href="/assets/js/6.0b5d6365.js"><link rel="prefetch" href="/assets/js/60.2db0a1a8.js"><link rel="prefetch" href="/assets/js/61.b4db17d2.js"><link rel="prefetch" href="/assets/js/62.4aa9c88c.js"><link rel="prefetch" href="/assets/js/63.687d4393.js"><link rel="prefetch" href="/assets/js/64.da286e35.js"><link rel="prefetch" href="/assets/js/65.0048315d.js"><link rel="prefetch" href="/assets/js/66.842b0f76.js"><link rel="prefetch" href="/assets/js/67.ca23d6c3.js"><link rel="prefetch" href="/assets/js/68.af55b577.js"><link rel="prefetch" href="/assets/js/69.3faac7ab.js"><link rel="prefetch" href="/assets/js/7.c6b9ef78.js"><link rel="prefetch" href="/assets/js/70.10aac9ff.js"><link rel="prefetch" href="/assets/js/71.518c4fa7.js"><link rel="prefetch" href="/assets/js/72.37b67ecc.js"><link rel="prefetch" href="/assets/js/73.7aebaed8.js"><link rel="prefetch" href="/assets/js/74.d44ba387.js"><link rel="prefetch" href="/assets/js/75.938e5d60.js"><link rel="prefetch" href="/assets/js/76.b4c99a45.js"><link rel="prefetch" href="/assets/js/77.a9ba8193.js"><link rel="prefetch" href="/assets/js/78.3cb7672c.js"><link rel="prefetch" href="/assets/js/79.31c9f385.js"><link rel="prefetch" href="/assets/js/8.2e49308c.js"><link rel="prefetch" href="/assets/js/80.076d581b.js"><link rel="prefetch" href="/assets/js/81.56b7bfb0.js"><link rel="prefetch" href="/assets/js/82.1b4546de.js"><link rel="prefetch" href="/assets/js/83.647327e8.js"><link rel="prefetch" href="/assets/js/84.d3e47f47.js"><link rel="prefetch" href="/assets/js/85.e87c4084.js"><link rel="prefetch" href="/assets/js/86.8083d1e3.js"><link rel="prefetch" href="/assets/js/87.7dcfa72d.js"><link rel="prefetch" href="/assets/js/88.06082791.js"><link rel="prefetch" href="/assets/js/89.ab52b490.js"><link rel="prefetch" href="/assets/js/9.64727c80.js"><link rel="prefetch" href="/assets/js/90.a1265b3f.js"><link rel="prefetch" href="/assets/js/91.05480ab6.js"><link rel="prefetch" href="/assets/js/92.d116ed0a.js"><link rel="prefetch" href="/assets/js/93.74379bdc.js"><link rel="prefetch" href="/assets/js/94.3ca7ca9a.js"><link rel="prefetch" href="/assets/js/95.be2c08bf.js"><link rel="prefetch" href="/assets/js/96.4fde0d8d.js"><link rel="prefetch" href="/assets/js/97.22bb863f.js"><link rel="prefetch" href="/assets/js/98.4eeef762.js"><link rel="prefetch" href="/assets/js/99.ca987746.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0ce27dc8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Mflyyou</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/java/base/java-messy-code.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/go/base/go-command.html" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/springboot/project-sumary/" class="nav-link">
  SpringBoot
</a></div><div class="nav-item"><a href="/tcp-ip/http/http-cors-jsonp/" class="nav-link">
  TCP/IP
</a></div><div class="nav-item"><a href="/dev-tools/asdf/" class="nav-link">
  开发工具
</a></div><div class="nav-item"><a href="/devops/docker/" class="nav-link">
  DevOps
</a></div> <a href="https://github.com/zhangpanqin/mflyyou" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/java/base/java-messy-code.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/go/base/go-command.html" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/springboot/project-sumary/" class="nav-link">
  SpringBoot
</a></div><div class="nav-item"><a href="/tcp-ip/http/http-cors-jsonp/" class="nav-link">
  TCP/IP
</a></div><div class="nav-item"><a href="/dev-tools/asdf/" class="nav-link">
  开发工具
</a></div><div class="nav-item"><a href="/devops/docker/" class="nav-link">
  DevOps
</a></div> <a href="https://github.com/zhangpanqin/mflyyou" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>asdf 工具多版本管理</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev-tools/asdf.html" class="sidebar-link">asdf</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Git</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev-tools/git/git.html" class="sidebar-link">Git 配置</a></li><li><a href="/dev-tools/git/git-command.html" class="sidebar-link">Git 命令</a></li><li><a href="/dev-tools/git/git-principle.html" class="sidebar-link">Git 原理</a></li><li><a href="/dev-tools/git/git-hook.html" class="sidebar-link">Git Hook</a></li><li><a href="/dev-tools/git/git-submodule.html" class="sidebar-link">Git Submodule</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Brew</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev-tools/brew.html" class="sidebar-link">HomeBrew</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Iterm2</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev-tools/iterm2.html" class="sidebar-link">Iterm2</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Gradle</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev-tools/gradle.html" aria-current="page" class="active sidebar-link">Gradle</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#gradle-项目下文件介绍" class="sidebar-link">Gradle 项目下文件介绍</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#gradlew-和-gradlew-bat" class="sidebar-link">gradlew 和 gradlew.bat</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#wrapper" class="sidebar-link">wrapper</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#settings-gradle" class="sidebar-link">settings.gradle</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#build-gradle" class="sidebar-link">build.gradle</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#gradle-properties" class="sidebar-link">gradle.properties</a></li></ul></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#gradle-daemon" class="sidebar-link">Gradle Daemon</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#构建生命周期" class="sidebar-link">构建生命周期</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#初始化阶段" class="sidebar-link">初始化阶段</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#配置阶段" class="sidebar-link">配置阶段</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#执行阶段" class="sidebar-link">执行阶段</a></li></ul></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#依赖管理" class="sidebar-link">依赖管理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#maven-私服配置" class="sidebar-link">Maven 私服配置</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#gradle-configuration" class="sidebar-link">Gradle Configuration</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#配置依赖来自某个目录" class="sidebar-link">配置依赖来自某个目录</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#依赖冲突" class="sidebar-link">依赖冲突</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#配置依赖之间继承" class="sidebar-link">配置依赖之间继承</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#api-和-implementation-区别" class="sidebar-link">api 和 implementation 区别</a></li></ul></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#task" class="sidebar-link">Task</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#groovy-闭包" class="sidebar-link">Groovy 闭包</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#task-outcomes" class="sidebar-link">Task outcomes</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#调试-task-的执行顺序" class="sidebar-link">调试 task 的执行顺序</a></li></ul></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#plugin" class="sidebar-link">Plugin</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#插件分类" class="sidebar-link">插件分类</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#buildsrc" class="sidebar-link">buildSrc</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#插件使用" class="sidebar-link">插件使用</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#debugging-build-logic" class="sidebar-link">Debugging build logic</a></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#build-script-classpath-和-application-source-code-classpath" class="sidebar-link">Build script classpath 和 application source code classpath</a></li></ul></li><li class="sidebar-sub-header"><a href="/dev-tools/gradle.html#gradle-cache" class="sidebar-link">Gradle Cache</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Maven</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev-tools/maven.html" class="sidebar-link">Maven</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Mac</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dev-tools/mac.html" class="sidebar-link">Mac</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="gradle"><a href="#gradle" class="header-anchor">#</a> Gradle</h1> <h3 id="环境介绍"><a href="#环境介绍" class="header-anchor">#</a> 环境介绍</h3> <ul><li>OpenJDK 17.0.5</li> <li>Gradle 7.6</li> <li><a href="https://github.com/zhangpanqin/fly-gradle" target="_blank" rel="noopener noreferrer">示例代码 fly-gradle<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="gradle-项目下文件介绍"><a href="#gradle-项目下文件介绍" class="header-anchor">#</a> Gradle 项目下文件介绍</h2> <p>如果你的电脑安装了 gradle，可以使用 gradle init 去初始化一个新的 gradle 工程，然后使用电脑安装的 gradle 去执行构建命令。</p> <p>但是每个开发电脑上的 gradle 版本不一样，为了统一构建环境，我们可以使用 gradle wrapper 限定项目依赖 gradle 的版本。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 会生成 gradle/wrapper/* gradlew gradlew.bat</span>
gradle wrapper --gradle-version <span class="token number">7.5</span>.1 --distribution-type bin
</code></pre></div><div class="language- extra-class"><pre class="language-text"><code>.
├── build.gradle
├── gradle
│   └── wrapper
│       ├── gradle-wrapper.jar
│       └── gradle-wrapper.properties
├── gradle.properties
├── gradlew
├── gradlew.bat
├── settings.gradle
</code></pre></div><h3 id="gradlew-和-gradlew-bat"><a href="#gradlew-和-gradlew-bat" class="header-anchor">#</a> gradlew 和 gradlew.bat</h3> <p>运行项目 <code>wrapper</code> 下定义的 gradle 去构建项目。</p> <p><code>gradlew</code> 是 macos 和 linux 系统下。</p> <p><code>gradlew.bat</code> 是 windows 系统下使用的。</p> <h3 id="wrapper"><a href="#wrapper" class="header-anchor">#</a> wrapper</h3> <p><img src="/assets/img/wrapper-workflow.17f02560.png" alt="wrapper workflow"></p> <p>wrapper 定义项目依赖那个版本的 gradle，如果本地 distributionPath 没有对应版本的 gradle，会自动下载对应版本的 gradle。</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token comment"># gradle-wrapper.properties</span>
<span class="token key attr-name">distributionBase</span><span class="token punctuation">=</span><span class="token value attr-value">GRADLE_USER_HOME</span>
<span class="token key attr-name">distributionPath</span><span class="token punctuation">=</span><span class="token value attr-value">wrapper/dists</span>
<span class="token comment"># 如果是国内项目，只需要修改这个url 就可以提高下载速度</span>
<span class="token key attr-name">distributionUrl</span><span class="token punctuation">=</span><span class="token value attr-value">https\://services.gradle.org/distributions/gradle-6.7-bin.zip</span>
<span class="token key attr-name">zipStoreBase</span><span class="token punctuation">=</span><span class="token value attr-value">GRADLE_USER_HOME</span>
<span class="token key attr-name">zipStorePath</span><span class="token punctuation">=</span><span class="token value attr-value">wrapper/dists</span>
</code></pre></div><p><code>GRADLE_USER_HOME</code> 没有配置的话，默认是 <code>~/.gradle</code></p> <p><code>zipStoreBase</code> 和 <code>zipStorePath</code> 定义了下载的 gradle (gradle-7.6-bin.zip) 存储的本地路径。</p> <p><code>distributionBase</code> 和 <code>distributionPath</code> 定义下载的 gradle 解压的本地目录。</p> <p><code>gradlew</code> 实际是运行 gradle-wrapper.jar 中的 <a href="https://github.com/gradle/gradle/blob/v7.6.1/subprojects/wrapper/src/main/java/org/gradle/wrapper/GradleWrapperMain.java#L38" target="_blank" rel="noopener noreferrer">main 方法<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，传递给 gradlew 的参数实际上也会传递给这个 main 方法。</p> <p>gradle-wrapper.jar 会判断是否下载 wrapper 配置的 gradle，并且将传递参数给下载的 gradle，并运行下载的 gralde 进行构建项目。</p> <p>配置 gradle wrapper 下载需要的密码 和 mtls 证书</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">systemProp.gradle.wrapperUser</span><span class="token punctuation">=</span><span class="token value attr-value">xx</span>
<span class="token key attr-name">systemProp.gradle.wrapperPassword</span><span class="token punctuation">=</span><span class="token value attr-value">xx</span>


<span class="token comment"># mtls</span>
<span class="token key attr-name">systemProp.javax.net.ssl.keyStore</span><span class="token punctuation">=</span><span class="token value attr-value">/Users/panqinzhang/xx.pfx</span>
<span class="token key attr-name">systemProp.javax.net.ssl.keyStoreType</span><span class="token punctuation">=</span><span class="token value attr-value">pkcs12</span>
<span class="token key attr-name">systemProp.javax.net.ssl.keyStorePassword</span><span class="token punctuation">=</span><span class="token value attr-value">xx</span>
</code></pre></div><p>升级 wrapper 定义的 gradle 版本</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./gradlew wrapper --gradle-version <span class="token number">7.6</span>
</code></pre></div><h3 id="settings-gradle"><a href="#settings-gradle" class="header-anchor">#</a> settings.gradle</h3> <div class="language-groovy extra-class"><pre class="language-groovy"><code>pluginManagement <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        maven <span class="token punctuation">{</span>
            url<span class="token operator">=</span><span class="token interpolation-string"><span class="token string">&quot;file://</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">rootDir</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/maven/plugin&quot;</span></span>
        <span class="token punctuation">}</span>
        <span class="token function">gradlePluginPortal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    plugins <span class="token punctuation">{</span>
      	<span class="token comment">// spring_boot_version 可以在 gradle.properties 配置</span>
        id <span class="token string">'org.springframework.boot'</span> version <span class="token interpolation-string"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">spring_boot_version</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
rootProject<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'fly-gradle'</span>
include <span class="token string">'user-manage-service'</span><span class="token punctuation">,</span><span class="token string">'user-manage-sdk'</span>
include <span class="token string">'lib-a'</span>
include <span class="token string">'lib-b'</span>
</code></pre></div><p>settings.gradle 主要用于配置项目名称，和包含哪些子项目。</p> <p>也可以用于配置插件的依赖版本（不会应用到项目中去，除非项目应用这个插件）和插件下载的仓库</p> <h3 id="build-gradle"><a href="#build-gradle" class="header-anchor">#</a> build.gradle</h3> <p>build.gradle 是对某个项目的配置。配置 jar 依赖关系，定义或者引入 task 去完成项目构建。</p> <h3 id="gradle-properties"><a href="#gradle-properties" class="header-anchor">#</a> gradle.properties</h3> <p>主要用于配置构建过程中用到的变量值。也可以配置一些 gradle 内置变量的值，用于修改默认构建行为。</p> <div class="language-properties extra-class"><pre class="language-properties"><code><span class="token key attr-name">org.gradle.logging.level</span><span class="token punctuation">=</span><span class="token value attr-value">quiet</span>
<span class="token key attr-name">org.gradle.caching</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">org.gradle.parallel</span><span class="token punctuation">=</span><span class="token value attr-value">true</span>
<span class="token key attr-name">org.gradle.jvmargs</span><span class="token punctuation">=</span><span class="token value attr-value">-Xms512m -Xmx2g -XX:MaxMetaspaceSize=512m -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8</span>
</code></pre></div><p><code>org.gradle.jvmargs</code> 用来配置 Daemon 的 JVM 参数，默认值是 <code>-Xmx512m &quot;-XX:MaxMetaspaceSize=384m&quot;</code>。</p> <p>当我们的项目比较大的时候，可能会由于 JVM 堆内存不足导致构建失败，就需要修改此配置。</p> <p><code>org.gradle.logging.level</code> 调整 gradle 的日志级别。参考 <a href="https://docs.gradle.org/current/userguide/logging.html#sec:choosing_a_log_level" target="_blank" rel="noopener noreferrer">gradle logging<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 选择想要的日志级别。</p> <h2 id="gradle-daemon"><a href="#gradle-daemon" class="header-anchor">#</a> Gradle Daemon</h2> <p>为加快项目构建，gralde 会启动一个常驻 JVM 后台进程去处理构建，Daemon 进程默认三小时过期且当内存压力大的时候也会关闭。</p> <p>Gradle 默认会启用 Daemon 进程去构建项目。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 查看 daemon 运行状态</span>
./gradlew <span class="token parameter variable">--status</span>
<span class="token comment"># stop daemon 进程</span>
./gradlew <span class="token parameter variable">--stop</span>
<span class="token comment"># 重启 daemon 进程</span>
./gradlew <span class="token parameter variable">--daemon</span>
</code></pre></div><h2 id="构建生命周期"><a href="#构建生命周期" class="header-anchor">#</a> 构建生命周期</h2> <p>Gradle 是基于 task 依赖关系来构建项目的，我们只需要定义 task 和 task 之间的依赖关系，Gradle 会保证 task 的执行顺序。</p> <p>Gradle 在执行 task 之前会建立 <code>Task Graphs</code>，我们引入的插件和自己的构建脚本会往这个 task graph 中添加 task。</p> <p><img src="/assets/img/task-dag-examples.097414aa.png" alt="Example task graphs"></p> <p>Gradle 的构建过程分为三部分：初始化阶段、配置阶段和执行阶段。</p> <h3 id="初始化阶段"><a href="#初始化阶段" class="header-anchor">#</a> 初始化阶段</h3> <ul><li>找到 settings.gradle，执行其中代码</li> <li>确定有哪些项目需要构建，然后对每个项目创建 Project 对象，build.gradle 主要就是配置这个 Project 对象</li></ul> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token comment">// settings.gradle</span>
rootProject<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'basic'</span>
println <span class="token string">'在初始化阶段执行'</span>
</code></pre></div><h3 id="配置阶段"><a href="#配置阶段" class="header-anchor">#</a> 配置阶段</h3> <ul><li>执行 build.gradle 中的配置代码，对 Project 进行配置</li> <li>执行 Task 中的配置段语句</li> <li>根据请求执行的 task，建立 task graph</li></ul> <div class="language-groovy extra-class"><pre class="language-groovy"><code>println <span class="token string">'在配置阶段执行 Task 中的配置段语句'</span>

tasks<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'configured'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  println <span class="token string">'在配置阶段执行 Task 中的配置段语句'</span>
  doFirst <span class="token punctuation">{</span>
    println <span class="token string">'在执行阶段执行'</span>
  <span class="token punctuation">}</span>
  doLast <span class="token punctuation">{</span>
    println <span class="token string">'在执行阶段执行'</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="执行阶段"><a href="#执行阶段" class="header-anchor">#</a> 执行阶段</h3> <p>根据 task graph 执行 task 代码。</p> <h2 id="依赖管理"><a href="#依赖管理" class="header-anchor">#</a> 依赖管理</h2> <h3 id="maven-私服配置"><a href="#maven-私服配置" class="header-anchor">#</a> Maven 私服配置</h3> <p>我们一般都是多项目构建，因此只需要在父项目 build.gradle 配置 repositories。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>allprojects <span class="token punctuation">{</span>
  repositories <span class="token punctuation">{</span>
    maven <span class="token punctuation">{</span>
      url <span class="token interpolation-string"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">mavenPublicUrl</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
      credentials <span class="token punctuation">{</span>
        username <span class="token interpolation-string"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">mavenUsername</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
        password <span class="token interpolation-string"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token expression">mavenPassword</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&quot;</span></span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token function">mavenLocal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token function">mavenCentral</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>credentials 配置账号密码，当私服不需要权限下载的时候可以不配置。</p> <p>Gradle 会按照配置的仓库顺序查询依赖下载。</p> <h3 id="gradle-configuration"><a href="#gradle-configuration" class="header-anchor">#</a> Gradle Configuration</h3> <p><code>Configuration</code> 用于声明一组 jar 依赖，它可以让 plugin 在构建的时候知道使用哪些依赖。</p> <p>compileOnly 就是一种类型 <code>Configuration</code>，它是由 java plugin 这个插件引入进来的。我们可以 compileOnly 去定义那些依赖是在  application code 编译的时候使用，这个功能也是 java plugin 定义好的。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>dependencies <span class="token punctuation">{</span>
	compileOnly <span class="token string">'org.projectlombok:lombok:1.18.26'</span>
	annotationProcessor <span class="token string">'org.projectlombok:lombok:1.18.26'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们也可以自定义 Configuration，比如 mavenBom</p> <p>比如我们在多项目构建中，父工程的 build.gradle 定义 configuration，然后就可以使用 maven bom 中定义好的 jar</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>configurations <span class="token punctuation">{</span>
  parentBom
  runtimeOnly<span class="token punctuation">.</span><span class="token function">extendsFrom</span><span class="token punctuation">(</span>parentBom<span class="token punctuation">)</span>
  compileOnly<span class="token punctuation">.</span><span class="token function">extendsFrom</span><span class="token punctuation">(</span>parentBom<span class="token punctuation">)</span>
  annotationProcessor<span class="token punctuation">.</span><span class="token function">extendsFrom</span><span class="token punctuation">(</span>parentBom<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

dependencies <span class="token punctuation">{</span>
  parentBom <span class="token function">platform</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;org.springframework.boot:spring-boot-dependencies:3.0.4&quot;</span></span><span class="token punctuation">)</span> 
<span class="token punctuation">}</span>
</code></pre></div><p>子工程就可以直接引入依赖，不需要引入 org.springframework.boot 和 io.spring.dependency-management 插件也可以。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>dependencies <span class="token punctuation">{</span>
  implementation <span class="token string">'org.springframework.boot:spring-boot-starter-web'</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="配置依赖来自某个目录"><a href="#配置依赖来自某个目录" class="header-anchor">#</a> 配置依赖来自某个目录</h3> <div class="language-groovy extra-class"><pre class="language-groovy"><code>dependencies <span class="token punctuation">{</span>
	compile <span class="token function">files</span><span class="token punctuation">(</span><span class="token string">'lib/hacked-vendor-module.jar'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
dependencies <span class="token punctuation">{</span>
	compile <span class="token function">fileTree</span><span class="token punctuation">(</span><span class="token string">'lib'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>有的时候第三方库没有 maven 供我们使用，可以使用这个。</p> <h3 id="依赖冲突"><a href="#依赖冲突" class="header-anchor">#</a> 依赖冲突</h3> <h4 id="默认依赖冲突"><a href="#默认依赖冲突" class="header-anchor">#</a> 默认依赖冲突</h4> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>当出现依赖冲突的时候，gradle 优先选择版本较高的，因为 Gradle 认为较高版本会兼容低版本。</p></div> <div class="language-groovy extra-class"><pre class="language-groovy"><code>dependencies <span class="token punctuation">{</span>
    implementation <span class="token string">'com.google.guava:guava:31.1-jre'</span>
    implementation <span class="token string">'com.google.code.findbugs:jsr305:3.0.0'</span>

    testImplementation <span class="token string">'org.junit.jupiter:junit-jupiter-api:5.8.1'</span>
    testRuntimeOnly <span class="token string">'org.junit.jupiter:junit-jupiter-engine:5.8.1'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们可以执行下面命令查看项目依赖的版本：</p> <div class="language-sh extra-class"><pre class="language-sh"><code>./gradlew dependency-management:dependencies <span class="token parameter variable">--configuration</span> compileClasspath

------------------------------------------------------------
Project <span class="token string">':dependency-management'</span>
------------------------------------------------------------

compileClasspath - Compile classpath <span class="token keyword">for</span> <span class="token builtin class-name">source</span> <span class="token builtin class-name">set</span> <span class="token string">'main'</span><span class="token builtin class-name">.</span>
+--- org.springframework.boot:spring-boot-dependencies:3.0.2
+--- com.google.guava:guava:31.1-jre
<span class="token operator">|</span>    +--- com.google.guava:failureaccess:1.0.1
<span class="token operator">|</span>    +--- com.google.guava:listenablefuture:9999.0-empty-to-avoid-conflict-with-guava
<span class="token operator">|</span>    +--- com.google.code.findbugs:jsr305:3.0.2
<span class="token operator">|</span>    +--- org.checkerframework:checker-qual:3.12.0
<span class="token operator">|</span>    +--- com.google.errorprone:error_prone_annotations:2.11.0
<span class="token operator">|</span>    <span class="token punctuation">\</span>--- com.google.j2objc:j2objc-annotations:1.3
<span class="token punctuation">\</span>--- com.google.code.findbugs:jsr305:3.0.0 -<span class="token operator">&gt;</span> <span class="token number">3.0</span>.2
</code></pre></div><p>我们可以看到，gradle 选择了 com.google.code.findbugs:jsr305:3.0.2 这个版本。</p> <h4 id="强制使用某个版本"><a href="#强制使用某个版本" class="header-anchor">#</a> 强制使用某个版本</h4> <p>如果我们想使用 com.google.code.findbugs:jsr305:3.0.0 版本</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>dependencies <span class="token punctuation">{</span>
    implementation <span class="token string">'com.google.guava:guava:31.1-jre'</span>
    implementation <span class="token string">'com.google.code.findbugs:jsr305:3.0.0'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        force <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
    testImplementation <span class="token string">'org.junit.jupiter:junit-jupiter-api:5.8.1'</span>
    testRuntimeOnly <span class="token string">'org.junit.jupiter:junit-jupiter-engine:5.8.1'</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>./gradlew <span class="token parameter variable">-q</span> dependency-management:dependencyInsight <span class="token parameter variable">--dependency</span> jsr305 <span class="token parameter variable">--configuration</span> compileClasspath
</code></pre></div><div class="language-text extra-class"><pre class="language-text"><code>com.google.code.findbugs:jsr305:3.0.0 (forced)
  Variant compile:
    | Attribute Name                 | Provided | Requested    |
    |--------------------------------|----------|--------------|
    | org.gradle.status              | release  |              |
    | org.gradle.category            | library  | library      |
    | org.gradle.libraryelements     | jar      | classes      |
    | org.gradle.usage               | java-api | java-api     |
    | org.gradle.dependency.bundling |          | external     |
    | org.gradle.jvm.environment     |          | standard-jvm |
    | org.gradle.jvm.version         |          | 17           |

com.google.code.findbugs:jsr305:3.0.0
\--- compileClasspath

com.google.code.findbugs:jsr305:3.0.2 -&gt; 3.0.0
\--- com.google.guava:guava:31.1-jre
     \--- compileClasspath
</code></pre></div><h4 id="禁用依赖传递"><a href="#禁用依赖传递" class="header-anchor">#</a> 禁用依赖传递</h4> <p>guava 不会传递依赖它依赖的库到当前库，可以看到</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>dependencies <span class="token punctuation">{</span> 
    implementation <span class="token string">'com.google.guava:guava:31.1-jre'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        transitive <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    implementation <span class="token string">'com.google.code.findbugs:jsr305:3.0.0'</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>./gradlew dependency-management:dependencies <span class="token parameter variable">--configuration</span> compileClasspath

------------------------------------------------------------
Project <span class="token string">':dependency-management'</span>
------------------------------------------------------------

compileClasspath - Compile classpath <span class="token keyword">for</span> <span class="token builtin class-name">source</span> <span class="token builtin class-name">set</span> <span class="token string">'main'</span><span class="token builtin class-name">.</span>
+--- org.springframework.boot:spring-boot-dependencies:3.0.2
+--- com.google.guava:guava:31.1-jre
<span class="token punctuation">\</span>--- com.google.code.findbugs:jsr305:3.0.0
</code></pre></div><p>可以看到 guava 依赖的 jar 没有传递到当前项目中来。</p> <h4 id="排除某个依赖"><a href="#排除某个依赖" class="header-anchor">#</a> 排除某个依赖</h4> <p>Guava 依赖的别的 jar 可以传递进来，而且排除了 <code>findbugs</code>, 项目依赖的版本为 <code>3.0.0</code>。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>dependencies <span class="token punctuation">{</span> 
	 implementation <span class="token string">'com.google.guava:guava:31.1-jre'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        exclude group<span class="token punctuation">:</span> <span class="token string">'com.google.code.findbugs'</span><span class="token punctuation">,</span> module<span class="token punctuation">:</span> <span class="token string">'jsr305'</span>
    <span class="token punctuation">}</span>
    implementation <span class="token string">'com.google.code.findbugs:jsr305:3.0.0'</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-shell extra-class"><pre class="language-shell"><code>./gradlew dependency-management:dependencies <span class="token parameter variable">--configuration</span> compileClasspath

------------------------------------------------------------
Project <span class="token string">':dependency-management'</span>
------------------------------------------------------------

compileClasspath - Compile classpath <span class="token keyword">for</span> <span class="token builtin class-name">source</span> <span class="token builtin class-name">set</span> <span class="token string">'main'</span><span class="token builtin class-name">.</span>
+--- org.springframework.boot:spring-boot-dependencies:3.0.2
+--- com.google.guava:guava:31.1-jre
<span class="token operator">|</span>    +--- com.google.guava:failureaccess:1.0.1
<span class="token operator">|</span>    +--- com.google.guava:listenablefuture:9999.0-empty-to-avoid-conflict-with-guava
<span class="token operator">|</span>    +--- org.checkerframework:checker-qual:3.12.0
<span class="token operator">|</span>    +--- com.google.errorprone:error_prone_annotations:2.11.0
<span class="token operator">|</span>    <span class="token punctuation">\</span>--- com.google.j2objc:j2objc-annotations:1.3
<span class="token punctuation">\</span>--- com.google.code.findbugs:jsr305:3.0.0
</code></pre></div><p>可以看到 guava 传递到当前项目的依赖少了 <code>findbugs</code> 。</p> <h3 id="配置依赖之间继承"><a href="#配置依赖之间继承" class="header-anchor">#</a> 配置依赖之间继承</h3> <div class="language-txt extra-class"><pre class="language-txt"><code>configurations {
    integrationTestImplementation.extendsFrom testImplementation
    integrationTestRuntimeOnly.extendsFrom testRuntimeOnly
}

configurations.all {
    resolutionStrategy {
        force 'org.apache.tomcat.embed:tomcat-embed-core:9.0.43'
    }
    exclude group: 'org.slf4j', module: 'slf4j-simple'
}
</code></pre></div><h3 id="api-和-implementation-区别"><a href="#api-和-implementation-区别" class="header-anchor">#</a> api 和 implementation 区别</h3> <p>jar b 包含以下依赖</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>dependencies <span class="token punctuation">{</span>
    api <span class="token string">'org.apache.commons:commons-lang3:3.12.0'</span>
    implementation <span class="token string">'com.google.guava:guava:31.1-jre'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>项目 a 引入 jar b ，commons-lang3 和 guava 都可以被工程 a 使用，只是二者 scope 不一样。</p> <p>api 对应 compile，在 <code>工程 a</code> 可以直接使用，编译可以通过。</p> <p>implementation 对应 runtime，编译找不到 guava 中的类。</p> <h2 id="task"><a href="#task" class="header-anchor">#</a> Task</h2> <p>我们引用的插件实际是添加 task 到 task graph 中去。</p> <p>我们知道 build.gradle 实际是用来配置对应项目的 org.gradle.api.Project。</p> <p>因此我们可以在 build.gradle 中引用 org.gradle.api.Project 暴露的属性。</p> <p>我们可以在 <a href="https://docs.gradle.org/7.6/dsl/org.gradle.api.Project.html#N14F33" target="_blank" rel="noopener noreferrer">gradle dsl<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 和 Project 接口中可以知道可以访问哪些属性。</p> <p>tasks 实际就是 Project 暴露的一个属性，因此我们可以使用 tasks 往当前项目中注册 task。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token string">'hello'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    doLast <span class="token punctuation">{</span>
        println <span class="token string">'hello'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>推荐使用 tasks.register 去注册 task，而不是 tasks.create 去直接创建。</p> <p>tasks.register 注册的 task 只会在用到的时候才会初始化。</p> <h3 id="groovy-闭包"><a href="#groovy-闭包" class="header-anchor">#</a> Groovy 闭包</h3> <p><a href="https://groovy-lang.org/closures.html#_syntax" target="_blank" rel="noopener noreferrer">Groovy Closures<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token punctuation">{</span> <span class="token punctuation">[</span>closureParameters <span class="token operator">-&gt;</span> <span class="token punctuation">]</span> statements <span class="token punctuation">}</span>
</code></pre></div><p>闭包的示例</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token punctuation">{</span> item<span class="token operator">++</span> <span class="token punctuation">}</span>                                          

<span class="token punctuation">{</span> <span class="token operator">-&gt;</span> item<span class="token operator">++</span> <span class="token punctuation">}</span>                                       

<span class="token punctuation">{</span> println it <span class="token punctuation">}</span>                                      

<span class="token punctuation">{</span> it <span class="token operator">-&gt;</span> println it <span class="token punctuation">}</span>                                
</code></pre></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>当方法的最后一个参数是闭包时，可以将闭包放在方法调用之后。</p></div> <p>比如注册一个 task 的接口是</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code><span class="token function">register</span><span class="token punctuation">(</span>String var1<span class="token punctuation">,</span> Action<span class="token operator">&lt;</span><span class="token operator">?</span> <span class="token keyword">super</span> Task<span class="token operator">&gt;</span> var2<span class="token punctuation">)</span>

tasks<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;task55&quot;</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    doFirst <span class="token punctuation">{</span>
        println <span class="token interpolation-string"><span class="token string">&quot;task55&quot;</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

tasks<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;task66&quot;</span></span><span class="token punctuation">,</span><span class="token punctuation">{</span>
    doFirst <span class="token punctuation">{</span>
        println <span class="token interpolation-string"><span class="token string">&quot;task66&quot;</span></span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="task-type"><a href="#task-type" class="header-anchor">#</a> Task Type</h4> <p>gradle 已经定义好一些 task type，我们可以使用这些 task type 帮助我们完成特定的事情。比如我们想要执行某个 shell 命令。</p> <p><a href="https://docs.gradle.org/7.6/dsl/org.gradle.api.tasks.Exec.html" target="_blank" rel="noopener noreferrer">Exec - Gradle DSL Version 7.6<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>tasks<span class="token punctuation">.</span><span class="token function">register</span><span class="token punctuation">(</span><span class="token interpolation-string"><span class="token string">&quot;task3&quot;</span></span><span class="token punctuation">,</span> Exec<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    workingDir <span class="token interpolation-string"><span class="token string">&quot;</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">$</span><span class="token expression">rootDir</span></span><span class="token string">&quot;</span></span>
    commandLine <span class="token interpolation-string"><span class="token string">&quot;ls&quot;</span></span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="task-outcomes"><a href="#task-outcomes" class="header-anchor">#</a> Task outcomes</h3> <p>gralde 具有 build cache，意思就是有个 task 可能在构建的过程中不需要执行，应用以前的构建结果。比如我们的 java 代码没有变化，但是你还是去编译 class 文件，gralde 就会使用 build cache，从task 执行的输出可以看到，有很多的 task 都是没有执行的，应用以前的构建。</p> <div class="language- extra-class"><pre class="language-text"><code>&gt; Task :application:compileJava UP-TO-DATE
&gt; Task :application:processResources UP-TO-DATE
&gt; Task :application:classes UP-TO-DATE
</code></pre></div><ul><li>EXECUTED，代表 task 执行它的构建逻辑。</li> <li>UP-TO-DATE，代表 task 输入输出没有改变，构建逻辑没有执行，或者没有构建逻辑，或者走了build cache。</li> <li>FROM-CACHE，task 的输出可以从 buildcache 找到，也代表不需要执行构建逻辑。</li> <li>SKIPPED task 不会执行构建逻辑，可能执行 task 的时候被指定排除了，或者构建逻辑的 onlyIf 导致，task 没有被触发。</li> <li>NO-SOURCE，代表 task 依赖的文件或者目录不存在，不需要执行 task。比如编译 java 文件，结果目录下没有 java 文件。</li></ul> <h3 id="调试-task-的执行顺序"><a href="#调试-task-的执行顺序" class="header-anchor">#</a> 调试 task 的执行顺序</h3> <div class="language-shell extra-class"><pre class="language-shell"><code>./gradlew application:check --dry-run
</code></pre></div><h2 id="plugin"><a href="#plugin" class="header-anchor">#</a> Plugin</h2> <h3 id="插件分类"><a href="#插件分类" class="header-anchor">#</a> 插件分类</h3> <p>Gradle 有两种类型的插件 <code>binary plugins</code> and <code>script plugins</code></p> <p>二进制插件就是封装好的构建逻辑打成 jar 发布到线上，供别的项目使用。</p> <p>脚本插件就是一个 <code>*.gradle</code> 文件。</p> <h3 id="buildsrc"><a href="#buildsrc" class="header-anchor">#</a> buildSrc</h3> <p>一般我们的项目是多项目构建，各个子项目会共享一些配置，比如 java 版本，repository 还有 jar publish 到哪里等等。</p> <p>我们可以将这些统一配置分组抽象为单独的插件，子项目引用这个插件即可。便于维护，不用在各个子项目都重复配置相同的东西。</p> <p>buildSrc 这个目录必须在根目录下，它会被 gradle 自动识别为一个 <a href="https://docs.gradle.org/current/userguide/composite_builds.html#defining_composite_builds" target="_blank" rel="noopener noreferrer">composite build<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，并将其编译之后放到项目构建脚本的 classpath 下。</p> <p>buildSrc 也可以写插件，我们可以直接在子项目中使用插件 id 引入。</p> <div class="language- extra-class"><pre class="language-text"><code>buildSrc/
├── build.gradle
├── settings.gradle
└── src
    ├── main
    │   ├── groovy
    │   │   └── mflyyou.hello2.gradle
    │   ├── java
    │   │   └── com
    │   │       └── mflyyou
    │   │           └── plugin
    │   │               ├── BinaryRepositoryExtension.java
    │   │               ├── BinaryRepositoryVersionPlugin.java
    │   │               └── LatestArtifactVersion.java
</code></pre></div><p>buildSrc/build.gradle</p> <p><code>groovy-gradle-plugin</code> 对应的是使用 groovy 写插件。</p> <p><code>java-gradle-plugin</code> 对应 java 写插件。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>plugins <span class="token punctuation">{</span>
    id <span class="token string">'groovy-gradle-plugin'</span>
    id <span class="token string">'java-gradle-plugin'</span>
<span class="token punctuation">}</span>
gradlePlugin <span class="token punctuation">{</span>
    plugins <span class="token punctuation">{</span>
        helloPlugin <span class="token punctuation">{</span>
            id <span class="token operator">=</span> <span class="token string">'com.mflyyou.hello'</span>
            implementationClass <span class="token operator">=</span> <span class="token string">'com.mflyyou.plugin.BinaryRepositoryVersionPlugin'</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们就可以在子项目使用插件</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>plugins <span class="token punctuation">{</span>
    id <span class="token string">'com.mflyyou.hello'</span>
    id <span class="token string">'mflyyou.hello2'</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="插件使用"><a href="#插件使用" class="header-anchor">#</a> 插件使用</h3> <ul><li>Applying plugins with the plugins DSL</li></ul> <div class="language-groovy extra-class"><pre class="language-groovy"><code>plugins <span class="token punctuation">{</span>
    id <span class="token string">'java'</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>Applying a plugin with the buildscript block</li></ul> <div class="language-groovy extra-class"><pre class="language-groovy"><code>buildscript <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        <span class="token function">gradlePluginPortal</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    dependencies <span class="token punctuation">{</span>
        classpath <span class="token string">'com.jfrog.bintray.gradle:gradle-bintray-plugin:1.8.5'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

apply plugin<span class="token punctuation">:</span> <span class="token string">'com.jfrog.bintray'</span>
</code></pre></div><ul><li>Applying a script plugin</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code>apply from: <span class="token string">'other.gradle'</span>
</code></pre></div><h3 id="debugging-build-logic"><a href="#debugging-build-logic" class="header-anchor">#</a> Debugging build logic</h3> <p><img src="/assets/img/remote-debug-gradle.09ab64f0.gif" alt="remote-debug-gradle"></p> <ul><li><p>在 idea 中配置 remote jvm debug</p></li> <li><p>用 debug 模式，运行 gradle 命令。下面命令会等待 debug attach jvm，才会继续执行。</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./gradlew <span class="token builtin class-name">help</span> <span class="token parameter variable">-Dorg.gradle.debug</span><span class="token operator">=</span>true --no-daemon
</code></pre></div></li> <li><p>然后运行 idea remote debug</p></li></ul> <h3 id="build-script-classpath-和-application-source-code-classpath"><a href="#build-script-classpath-和-application-source-code-classpath" class="header-anchor">#</a> Build script classpath 和 application source code classpath</h3> <p>我们的构建脚本也是代码，build.gradle 是 groovy 代码，他们也需要编译然后运行构建逻辑去帮助我们编译我们的业务代码和运行等等。</p> <p>因此 build script 也是有他们自己的 classpath 并且他们和我们的 source code 的 classpath 是分开的。</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 查看我们构建脚本的 classpath 有哪些 jar</span>
./gradlew buildEnvironment

+--- org.apache.commons:commons-lang3:3.12.0
+--- com.avast.gradle.docker-compose:com.avast.gradle.docker-compose.gradle.plugin:0.16.11
<span class="token operator">|</span>    <span class="token punctuation">\</span>--- com.avast.gradle:gradle-docker-compose-plugin:0.16.11
<span class="token operator">|</span>         <span class="token punctuation">\</span>--- org.yaml:snakeyaml:1.33
+--- org.springframework.boot:org.springframework.boot.gradle.plugin:3.0.2
</code></pre></div><p>因此我们写 binary plugin 的时候尽量避免去要第三方的工具包，如果出现了依赖冲突，很不好解决。要不然你不用冲突的插件，要不然你重写代码。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>buildscript <span class="token punctuation">{</span>
    repositories <span class="token punctuation">{</span>
        <span class="token function">mavenCentral</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    dependencies <span class="token punctuation">{</span>
        classpath group<span class="token punctuation">:</span> <span class="token string">'commons-codec'</span><span class="token punctuation">,</span> name<span class="token punctuation">:</span> <span class="token string">'commons-codec'</span><span class="token punctuation">,</span> version<span class="token punctuation">:</span> <span class="token string">'1.2'</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>buildscript 代码块就是定义我们自己的构建脚本需要哪些依赖，他们只是被添加到 classpath，如果你应用某个插件，还需要 apply plugin。</p> <p>plugins dsl ，也有个属性是 apply。当 apply 为 false 的时候，插件只是被引入到构建脚本的 classpath 下，但是插件中的 task 是不是应用当构建逻辑中去。</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>plugins <span class="token punctuation">{</span>
    id «plugin id»                                            
    id «plugin id» version «plugin version» <span class="token punctuation">[</span>apply «<span class="token boolean">false</span>»<span class="token punctuation">]</span>   
<span class="token punctuation">}</span>
</code></pre></div><h2 id="gradle-cache"><a href="#gradle-cache" class="header-anchor">#</a> Gradle Cache</h2> <p><a href="https://docs.gradle.org/8.2/userguide/directory_layout.html" target="_blank" rel="noopener noreferrer">The Directories and Files Gradle Uses<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>禁止 gradle 删除 cache <code>gradleUserHome/init.d/cache-settings.gradle</code></p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>beforeSettings <span class="token punctuation">{</span> settings <span class="token operator">-&gt;</span>
    settings<span class="token punctuation">.</span>caches <span class="token punctuation">{</span>
        cleanup <span class="token operator">=</span> Cleanup<span class="token punctuation">.</span>DISABLED
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zhangpanqin/mflyyou/edit/main/docs/dev-tools/gradle.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/3/24 下午12:28:55</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
            ←
            <a href="/dev-tools/iterm2.html" class="prev">
                Iterm2
            </a></span> <span class="next"><a href="/dev-tools/maven.html">
                Maven
            </a>
            →
        </span></p></div> </main> <aside class="right-sidebar"> <div class="right-sidebar-toc-container" style="display:;"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:650px"><div style="font-weight:bold;text-align:center;">Gradle</div> <hr> <div class="toc-box"><ul><li><a href="/dev-tools/gradle.html#gradle-项目下文件介绍" class="toc-sidebar-link">Gradle 项目下文件介绍</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#gradlew-和-gradlew-bat" class="toc-sidebar-link">gradlew 和 gradlew.bat</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#wrapper" class="toc-sidebar-link">wrapper</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#settings-gradle" class="toc-sidebar-link">settings.gradle</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#build-gradle" class="toc-sidebar-link">build.gradle</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#gradle-properties" class="toc-sidebar-link">gradle.properties</a></li></ul></li><li><a href="/dev-tools/gradle.html#gradle-daemon" class="toc-sidebar-link">Gradle Daemon</a><ul class="toc-sidebar-sub-headers"></ul></li><li><a href="/dev-tools/gradle.html#构建生命周期" class="toc-sidebar-link">构建生命周期</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#初始化阶段" class="toc-sidebar-link">初始化阶段</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#配置阶段" class="toc-sidebar-link">配置阶段</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#执行阶段" class="toc-sidebar-link">执行阶段</a></li></ul></li><li><a href="/dev-tools/gradle.html#依赖管理" class="toc-sidebar-link">依赖管理</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#maven-私服配置" class="toc-sidebar-link">Maven 私服配置</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#gradle-configuration" class="toc-sidebar-link">Gradle Configuration</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#配置依赖来自某个目录" class="toc-sidebar-link">配置依赖来自某个目录</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#依赖冲突" class="toc-sidebar-link">依赖冲突</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#配置依赖之间继承" class="toc-sidebar-link">配置依赖之间继承</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#api-和-implementation-区别" class="toc-sidebar-link">api 和 implementation 区别</a></li></ul></li><li><a href="/dev-tools/gradle.html#task" class="toc-sidebar-link">Task</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#groovy-闭包" class="toc-sidebar-link">Groovy 闭包</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#task-outcomes" class="toc-sidebar-link">Task outcomes</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#调试-task-的执行顺序" class="toc-sidebar-link">调试 task 的执行顺序</a></li></ul></li><li><a href="/dev-tools/gradle.html#plugin" class="toc-sidebar-link">Plugin</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#插件分类" class="toc-sidebar-link">插件分类</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#buildsrc" class="toc-sidebar-link">buildSrc</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#插件使用" class="toc-sidebar-link">插件使用</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#debugging-build-logic" class="toc-sidebar-link">Debugging build logic</a></li><li class="toc-sidebar-sub-header"><a href="/dev-tools/gradle.html#build-script-classpath-和-application-source-code-classpath" class="toc-sidebar-link">Build script classpath 和 application source code classpath</a></li></ul></li><li><a href="/dev-tools/gradle.html#gradle-cache" class="toc-sidebar-link">Gradle Cache</a><ul class="toc-sidebar-sub-headers"></ul></li></ul></div></div></div></div> <div class="right-sidebar-toolbar"><div class="option-box"><img src="/images/system/toc.png" class="nozoom"> <span class="show-txt">目录</span></div> <div class="option-box"><img src="/images/system/toggle.png" width="30px" class="nozoom"> <span class="show-txt">左栏</span></div> <div title="Iterm2" class="option-box" style="padding-left:2px;text-align:center;"><a href="/dev-tools/iterm2.html"><img src="/images/system/pre2.png" width="30px" class="nozoom"> <span class="show-txt">上一篇</span></a></div> <div title="Maven" class="option-box" style="padding-left:2px;text-align:center;"><a href="/dev-tools/maven.html"><img src="/images/system/next2.png" width="30px" class="nozoom"> <span class="show-txt">下一篇</span></a></div></div> </aside></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.c876b023.js" defer></script><script src="/assets/js/5.f1c50b28.js" defer></script><script src="/assets/js/2.85c620a8.js" defer></script><script src="/assets/js/10.9d78016d.js" defer></script><script src="/assets/js/11.66cb8558.js" defer></script>
  </body>
</html>
