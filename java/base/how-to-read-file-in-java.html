<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Java-中读取文件内容的-n-中方式 | Mflyyou</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/favicon.ico">
    <meta name="description" content="张攀钦的笔记">
    <meta name="theme-color" content="#3eaf7c">
    
    <link rel="preload" href="/assets/css/0.styles.0ce27dc8.css" as="style"><link rel="preload" href="/assets/js/app.c876b023.js" as="script"><link rel="preload" href="/assets/js/5.f1c50b28.js" as="script"><link rel="preload" href="/assets/js/2.85c620a8.js" as="script"><link rel="preload" href="/assets/js/66.842b0f76.js" as="script"><link rel="preload" href="/assets/js/11.66cb8558.js" as="script"><link rel="prefetch" href="/assets/js/10.9d78016d.js"><link rel="prefetch" href="/assets/js/100.d3ccb03a.js"><link rel="prefetch" href="/assets/js/101.db6336a9.js"><link rel="prefetch" href="/assets/js/102.dff088bb.js"><link rel="prefetch" href="/assets/js/103.87b5352b.js"><link rel="prefetch" href="/assets/js/104.e7e828d9.js"><link rel="prefetch" href="/assets/js/105.a0308ea1.js"><link rel="prefetch" href="/assets/js/106.7da8a737.js"><link rel="prefetch" href="/assets/js/12.2e1232ac.js"><link rel="prefetch" href="/assets/js/13.1fa48f49.js"><link rel="prefetch" href="/assets/js/14.88c327e5.js"><link rel="prefetch" href="/assets/js/15.886666ee.js"><link rel="prefetch" href="/assets/js/16.ff3aceaf.js"><link rel="prefetch" href="/assets/js/17.eadbe78e.js"><link rel="prefetch" href="/assets/js/18.cd8f2138.js"><link rel="prefetch" href="/assets/js/19.b44d07c7.js"><link rel="prefetch" href="/assets/js/20.74e35385.js"><link rel="prefetch" href="/assets/js/21.765405a2.js"><link rel="prefetch" href="/assets/js/22.2f152ee9.js"><link rel="prefetch" href="/assets/js/23.ac30fbae.js"><link rel="prefetch" href="/assets/js/24.711f90e7.js"><link rel="prefetch" href="/assets/js/25.d3d81640.js"><link rel="prefetch" href="/assets/js/26.95e73776.js"><link rel="prefetch" href="/assets/js/27.6a6bee8c.js"><link rel="prefetch" href="/assets/js/28.c23d3233.js"><link rel="prefetch" href="/assets/js/29.e7f501b7.js"><link rel="prefetch" href="/assets/js/3.fd75c0a5.js"><link rel="prefetch" href="/assets/js/30.160d973d.js"><link rel="prefetch" href="/assets/js/31.62e9ec91.js"><link rel="prefetch" href="/assets/js/32.63450723.js"><link rel="prefetch" href="/assets/js/33.6a9fe332.js"><link rel="prefetch" href="/assets/js/34.dc78c409.js"><link rel="prefetch" href="/assets/js/35.819eb997.js"><link rel="prefetch" href="/assets/js/36.6f0dd57b.js"><link rel="prefetch" href="/assets/js/37.97cff2db.js"><link rel="prefetch" href="/assets/js/38.42474606.js"><link rel="prefetch" href="/assets/js/39.22279c24.js"><link rel="prefetch" href="/assets/js/4.1d7c8e50.js"><link rel="prefetch" href="/assets/js/40.c79b3ee7.js"><link rel="prefetch" href="/assets/js/41.95abde40.js"><link rel="prefetch" href="/assets/js/42.1a49cfd4.js"><link rel="prefetch" href="/assets/js/43.d4322a35.js"><link rel="prefetch" href="/assets/js/44.d7f9ac42.js"><link rel="prefetch" href="/assets/js/45.531ba324.js"><link rel="prefetch" href="/assets/js/46.0ae453bf.js"><link rel="prefetch" href="/assets/js/47.5c18d38d.js"><link rel="prefetch" href="/assets/js/48.4df5e318.js"><link rel="prefetch" href="/assets/js/49.faafeee6.js"><link rel="prefetch" href="/assets/js/50.dc72e991.js"><link rel="prefetch" href="/assets/js/51.da69b59a.js"><link rel="prefetch" href="/assets/js/52.18528bef.js"><link rel="prefetch" href="/assets/js/53.090cfc3f.js"><link rel="prefetch" href="/assets/js/54.87b885f3.js"><link rel="prefetch" href="/assets/js/55.d191ddc1.js"><link rel="prefetch" href="/assets/js/56.1f5db295.js"><link rel="prefetch" href="/assets/js/57.4668a9cd.js"><link rel="prefetch" href="/assets/js/58.2459bcea.js"><link rel="prefetch" href="/assets/js/59.45048184.js"><link rel="prefetch" href="/assets/js/6.0b5d6365.js"><link rel="prefetch" href="/assets/js/60.2db0a1a8.js"><link rel="prefetch" href="/assets/js/61.b4db17d2.js"><link rel="prefetch" href="/assets/js/62.4aa9c88c.js"><link rel="prefetch" href="/assets/js/63.687d4393.js"><link rel="prefetch" href="/assets/js/64.da286e35.js"><link rel="prefetch" href="/assets/js/65.0048315d.js"><link rel="prefetch" href="/assets/js/67.ca23d6c3.js"><link rel="prefetch" href="/assets/js/68.af55b577.js"><link rel="prefetch" href="/assets/js/69.3faac7ab.js"><link rel="prefetch" href="/assets/js/7.c6b9ef78.js"><link rel="prefetch" href="/assets/js/70.10aac9ff.js"><link rel="prefetch" href="/assets/js/71.518c4fa7.js"><link rel="prefetch" href="/assets/js/72.37b67ecc.js"><link rel="prefetch" href="/assets/js/73.7aebaed8.js"><link rel="prefetch" href="/assets/js/74.d44ba387.js"><link rel="prefetch" href="/assets/js/75.938e5d60.js"><link rel="prefetch" href="/assets/js/76.b4c99a45.js"><link rel="prefetch" href="/assets/js/77.a9ba8193.js"><link rel="prefetch" href="/assets/js/78.3cb7672c.js"><link rel="prefetch" href="/assets/js/79.31c9f385.js"><link rel="prefetch" href="/assets/js/8.2e49308c.js"><link rel="prefetch" href="/assets/js/80.076d581b.js"><link rel="prefetch" href="/assets/js/81.56b7bfb0.js"><link rel="prefetch" href="/assets/js/82.1b4546de.js"><link rel="prefetch" href="/assets/js/83.647327e8.js"><link rel="prefetch" href="/assets/js/84.d3e47f47.js"><link rel="prefetch" href="/assets/js/85.e87c4084.js"><link rel="prefetch" href="/assets/js/86.8083d1e3.js"><link rel="prefetch" href="/assets/js/87.7dcfa72d.js"><link rel="prefetch" href="/assets/js/88.06082791.js"><link rel="prefetch" href="/assets/js/89.ab52b490.js"><link rel="prefetch" href="/assets/js/9.64727c80.js"><link rel="prefetch" href="/assets/js/90.a1265b3f.js"><link rel="prefetch" href="/assets/js/91.05480ab6.js"><link rel="prefetch" href="/assets/js/92.d116ed0a.js"><link rel="prefetch" href="/assets/js/93.74379bdc.js"><link rel="prefetch" href="/assets/js/94.3ca7ca9a.js"><link rel="prefetch" href="/assets/js/95.be2c08bf.js"><link rel="prefetch" href="/assets/js/96.4fde0d8d.js"><link rel="prefetch" href="/assets/js/97.22bb863f.js"><link rel="prefetch" href="/assets/js/98.4eeef762.js"><link rel="prefetch" href="/assets/js/99.ca987746.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0ce27dc8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Mflyyou</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/java/base/java-messy-code.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/go/base/go-command.html" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/springboot/project-sumary/" class="nav-link">
  SpringBoot
</a></div><div class="nav-item"><a href="/tcp-ip/http/http-cors-jsonp/" class="nav-link">
  TCP/IP
</a></div><div class="nav-item"><a href="/dev-tools/asdf/" class="nav-link">
  开发工具
</a></div><div class="nav-item"><a href="/devops/docker/" class="nav-link">
  DevOps
</a></div> <a href="https://github.com/zhangpanqin/mflyyou" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/java/base/java-messy-code.html" class="nav-link">
  Java
</a></div><div class="nav-item"><a href="/go/base/go-command.html" class="nav-link">
  Go
</a></div><div class="nav-item"><a href="/springboot/project-sumary/" class="nav-link">
  SpringBoot
</a></div><div class="nav-item"><a href="/tcp-ip/http/http-cors-jsonp/" class="nav-link">
  TCP/IP
</a></div><div class="nav-item"><a href="/dev-tools/asdf/" class="nav-link">
  开发工具
</a></div><div class="nav-item"><a href="/devops/docker/" class="nav-link">
  DevOps
</a></div> <a href="https://github.com/zhangpanqin/mflyyou" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Java 基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/base/java-messy-code.html" class="sidebar-link">深入理解 Java 乱码问题</a></li><li><a href="/java/base/java-run-command.html" class="sidebar-link">java command</a></li><li><a href="/java/base/java-reference.html" class="sidebar-link">java 中强软弱虚引用的妙用</a></li><li><a href="/java/base/how-to-read-file-in-java.html" aria-current="page" class="active sidebar-link">Java-中读取文件内容的-n-中方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#前言" class="sidebar-link">前言</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#本文设计内容" class="sidebar-link">本文设计内容</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#基于-file-获取文件内容" class="sidebar-link">基于 File 获取文件内容</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#获取绝对路径文件内容" class="sidebar-link">获取绝对路径文件内容</a></li><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#获取-jarfile-中的内容" class="sidebar-link">获取 JarFile 中的内容</a></li><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#获取相对路径的内容" class="sidebar-link">获取相对路径的内容</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#nio-读取文件内容" class="sidebar-link">nio 读取文件内容</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#获取绝对路径内容" class="sidebar-link">获取绝对路径内容</a></li><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#获取相对路径内容" class="sidebar-link">获取相对路径内容</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#基于-classloader-获取文件内容" class="sidebar-link">基于 ClassLoader 获取文件内容</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#classloader-getresourceasstream" class="sidebar-link">ClassLoader.getResourceAsStream</a></li><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#class-getresourceasstream" class="sidebar-link">Class.getResourceAsStream</a></li><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#" class="sidebar-link"></a></li></ul></li><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#类加载器" class="sidebar-link">类加载器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#启动类加载器介绍" class="sidebar-link">启动类加载器介绍</a></li><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#扩展类加载器" class="sidebar-link">扩展类加载器</a></li><li class="sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#应用类加载器" class="sidebar-link">应用类加载器</a></li></ul></li></ul></li><li><a href="/java/base/java-asynchronous-programming.html" class="sidebar-link">java 异步编程</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>IO</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/io/io-module.html" class="sidebar-link">从linux内核理解Java怎样实现Socket通信</a></li><li><a href="/java/io/java-io.html" class="sidebar-link">从Linux内核理解Java中的IO</a></li><li><a href="/java/io/java-nio.html" class="sidebar-link">从Linux内核理解JAVA的NIO</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JUC</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/juc/synchronized.html" class="sidebar-link">从锁升级的角度理解 synchronized</a></li><li><a href="/java/juc/volatile.html" class="sidebar-link">你需要了解 Lock 的前提-volatile</a></li><li><a href="/java/juc/thread-pool-executor.html" class="sidebar-link">ThreadPoolExecutor</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JVM</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/jvm/class-loader.html" class="sidebar-link">Java 类加载器</a></li><li><a href="/java/jvm/jvm-memory-model.html" class="sidebar-link">认识 Java 内存区域</a></li><li><a href="/java/jvm/jvm-gc.html" class="sidebar-link">了解垃圾回收和常用虚拟机参数</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>通用工具</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/java/lib/snowflake.html" class="sidebar-link">雪花算法</a></li><li><a href="/java/lib/distributed_lock.html" class="sidebar-link">分布式锁</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h2> <p>刚接触 <code>java</code> 的时候很困惑一个事情 <code>File</code>相对路径，以哪个目录为参照物。</p> <p>随着 io 模型的发展，java 1.7 的 <code>nio</code>，使用 <code>Path</code>、<code>Paths</code> 和 <code>Files</code> 等来方便 io 的操作。</p> <p><code>ClassLoader</code> 用于获取<code>class 文件</code> 的 io，我们也可以用于获取文件的 io，以便于我们读取文件内容。</p> <h3 id="本文设计内容"><a href="#本文设计内容" class="header-anchor">#</a> 本文设计内容</h3> <ul><li>File ，ZipFile，JarFile 读取相对路径和绝对路径文件内容。</li> <li>System.getProperty(&quot;user.dir”) 是怎么来的。</li> <li>Paths、Path、Files 读取文件内容。</li> <li>类加载器获取文件内容，Class.getResourceAsStream 和 ClassLoader.getResourceAsStream。</li> <li>介绍类加载器的双亲委派模型，及在代码中找到对应的加载逻辑。</li></ul> <p><font color="red">代码基于 <code>Mac 10.15.4</code>，JDK 1.8。</font></p> <h2 id="基于-file-获取文件内容"><a href="#基于-file-获取文件内容" class="header-anchor">#</a> 基于 File 获取文件内容</h2> <p>绝对路径的内容获取比较简单，直接获取文件 io ，然后利用工具类读取文件内容。</p> <h3 id="获取绝对路径文件内容"><a href="#获取绝对路径文件内容" class="header-anchor">#</a> 获取绝对路径文件内容</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;/Users/zhangpanqin/github/fly-java/demo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">cn<span class="token punctuation">.</span>hutool<span class="token punctuation">.</span>core<span class="token punctuation">.</span>io<span class="token punctuation">.</span></span>FileUtil</span><span class="token punctuation">.</span><span class="token function">readBytes</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="获取-jarfile-中的内容"><a href="#获取-jarfile-中的内容" class="header-anchor">#</a> 获取 JarFile 中的内容</h3> <p><code>JarFile</code> 继承 <code>ZipFile</code> 用于获取 jar 包中的内容。比如我想获取 jar 中的某个文件的的内容。</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">final</span> <span class="token class-name">File</span> file <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">File</span><span class="token punctuation">(</span><span class="token string">&quot;/Users/zhangpanqin/github/fly-java/src/main/resources/fastjson-1.2.68.jar&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> <span class="token class-name">JarFile</span> jarFile <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JarFile</span><span class="token punctuation">(</span>file<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> <span class="token class-name">JarEntry</span> jarEntry <span class="token operator">=</span> jarFile<span class="token punctuation">.</span><span class="token function">getJarEntry</span><span class="token punctuation">(</span><span class="token string">&quot;META-INF/LICENSE.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">final</span> <span class="token class-name">InputStream</span> inputStream <span class="token operator">=</span> jarFile<span class="token punctuation">.</span><span class="token function">getInputStream</span><span class="token punctuation">(</span>jarEntry<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 工具类是 hutool</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">IoUtil</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">IoUtil</span><span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span>inputStream<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="获取相对路径的内容"><a href="#获取相对路径的内容" class="header-anchor">#</a> 获取相对路径的内容</h3> <p><code>File.getAbsolutePath</code> 查看源码可以发现，相对路径其实就是在前面拼接了 <code>System.getProperty(&quot;user.dir&quot;)</code>。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">class</span> <span class="token class-name">UnixFileSystem</span> <span class="token keyword">extends</span> <span class="token class-name">FileSystem</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token class-name">File</span> f<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isAbsolute</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">return</span> f<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user.dir&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> f<span class="token punctuation">.</span><span class="token function">getPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>只要我们弄清楚 <code>System.getProperty(&quot;user.dir&quot;)</code>，问题就迎刃而解。<a href="https://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html" target="_blank" rel="noopener noreferrer">Java System Properties<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 中介绍 <code>user.dir</code> 是用户的工作目录。</p> <p><img src="/blog/20200418232814.png?author=zhangpanqin" alt="image-20200418232813977"></p> <p><font color="red">什么是用户工作目录呢？就是执行 java 命令的目录。</font>在那个目录下执行命令，usr.dir 就会被 java 虚拟机赋值为执行命令的路径。我在 <code>/Users/zhangpanqin/github/fly-java/test</code> 目录下运行编译的 <code>class</code> 文件。<code>-cp</code> 指定 classpath 路径。</p> <p><img src="/blog/20200418233359.png?author=zhangpanqin" alt="image-20200418233359327"></p> <h2 id="nio-读取文件内容"><a href="#nio-读取文件内容" class="header-anchor">#</a> nio 读取文件内容</h2> <p><code>Path</code> 可以类比 <code>File</code> 理解使用。然后工具类 <code>Paths</code> 可以获得 <code>Path</code>，<code>Files</code> 更是提供了丰富的 api 用于 crud 操作文件 <code>Path</code>。</p> <h3 id="获取绝对路径内容"><a href="#获取绝对路径内容" class="header-anchor">#</a> 获取绝对路径内容</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run33</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
   <span class="token keyword">final</span> <span class="token class-name">Path</span> path <span class="token operator">=</span> <span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/Users/zhangpanqin/github/fly-java/demo.txt&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token keyword">final</span> <span class="token keyword">byte</span><span class="token punctuation">[</span><span class="token punctuation">]</span> bytes <span class="token operator">=</span> <span class="token class-name">Files</span><span class="token punctuation">.</span><span class="token function">readAllBytes</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span>bytes<span class="token punctuation">,</span><span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="获取相对路径内容"><a href="#获取相对路径内容" class="header-anchor">#</a> 获取相对路径内容</h3> <p><code>Paths</code> 获取相对路径时，路径不以 <code>/</code> 开头。也可以理解成相对于 <code>System.getProperty(&quot;user.dir&quot;)</code> 路径。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;user.dir&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Paths</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toAbsolutePath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><img src="/blog/20200419001203.png?author=zhangpanqin" alt="image-20200419001203097"></p> <h2 id="基于-classloader-获取文件内容"><a href="#基于-classloader-获取文件内容" class="header-anchor">#</a> 基于 ClassLoader 获取文件内容</h2> <h3 id="classloader-getresourceasstream"><a href="#classloader-getresourceasstream" class="header-anchor">#</a> ClassLoader.getResourceAsStream</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// ClassLoader.getResourceAsStream java 1.8 源码</span>
<span class="token keyword">public</span> <span class="token class-name">InputStream</span> <span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">URL</span> url <span class="token operator">=</span> <span class="token function">getResource</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> url <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">?</span> url<span class="token punctuation">.</span><span class="token function">openStream</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">IOException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>从代码可以看到主要逻辑还是集中在 <code>getResource</code> 。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token class-name">URL</span> <span class="token function">getResource</span><span class="token punctuation">(</span><span class="token class-name">String</span> name<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">URL</span> url<span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>parent <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        url <span class="token operator">=</span> parent<span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        url <span class="token operator">=</span> <span class="token function">getBootstrapResource</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>url <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        url <span class="token operator">=</span> <span class="token function">findResource</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> url<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>以上代码的逻辑也即是我们常听到的 <code>双亲委派机制</code>。先让 <code>父类加载</code> 去加载资源，找不到再有自己找。<code>类加载器单独讲</code>。</p> <p>类加载器读取读取资源，先从自己负责的路径查找。比如应用类加载器 <code>sun.misc.Launcher.AppClassLoader#AppClassLoader</code> 负责 <code>classpath</code> 查找资源。类加载器读取资源相对于 <code>File</code> 和 <code>Path</code> 优势在哪里呢？比如当我想获取一个 <code>jar</code> 中的资源，你用路径就比较麻烦了，ClassLoader 可以从负责的路径下寻找，还可以去 jar 包中寻找。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">final</span> <span class="token class-name">URL</span> resource <span class="token operator">=</span> <span class="token class-name">Test2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">&quot;com/alibaba/fastjson/JSONArray.class&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>resource<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>上述打印结果</p> <div class="language-bash extra-class"><pre class="language-bash"><code>jar:file:/Users/zhangpanqin/.m2/repository/com/alibaba/fastjson/1.2.62/fastjson-1.2.62.jar<span class="token operator">!</span>/com/alibaba/fastjson/JSONArray.class
</code></pre></div><p>我们还可以获取一个路径的 <code>inputstream</code></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run222</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">InputStream</span> resourceAsStream <span class="token operator">=</span> <span class="token class-name">Test2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getResourceAsStream</span><span class="token punctuation">(</span><span class="token string">&quot;META-INF/maven/com.alibaba/fastjson/pom.properties&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">IoUtil</span><span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>resourceAsStream<span class="token punctuation">,</span> <span class="token class-name">StandardCharsets</span><span class="token punctuation">.</span><span class="token constant">UTF_8</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上述结果为：</p> <div class="language-txt extra-class"><pre class="language-txt"><code>#Generated by Maven
#Mon Oct 07 22:09:36 CST 2019
version=1.2.62
groupId=com.alibaba
artifactId=fastjson
</code></pre></div><h3 id="class-getresourceasstream"><a href="#class-getresourceasstream" class="header-anchor">#</a> Class.getResourceAsStream</h3> <p><code>Class.getResourceAsStream</code> 实际也调用的 <code>ClassLoader</code> 加载资源，但是它会将路径补充到相对于当前类所在包的路径。</p> <p>比如</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token comment">// com.fly.study.java.classloader.Test2</span>
<span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run555</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Test2</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">.</span><span class="token function">getResource</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>实际查找的资源为 <code>com.fly.study.java.classloader.name</code>。相对于当前类所在包的资源。</p> <h3 id=""><a href="#" class="header-anchor">#</a></h3> <h2 id="类加载器"><a href="#类加载器" class="header-anchor">#</a> 类加载器</h2> <p>我们经常会听到类加载器的 <code>双亲委派模型</code>。</p> <p><img src="/blog/20200419163544.png?author=zhangpanqin" alt="img"></p> <p>去哪里可以看到这些类加载呢。</p> <p><code>启动类加载器</code> 不是 java 代码实现的我们看不到源码。</p> <p>sun.misc.Launcher 类中有我们知道的 <code>扩展类加载器 sun.misc.Launcher.ExtClassLoader</code> 和 <code>应用类加载器 sun.misc.Launcher.AppClassLoader</code> 。</p> <p><code>java.lang.ClassLoader#getSystemClassLoader</code> 代码看的话，实际返回的应用类加载器。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token class-name">ClassLoader</span> <span class="token function">getSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">initSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>scl <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token class-name">SecurityManager</span> sm <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getSecurityManager</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>sm <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">checkClassLoaderPermission</span><span class="token punctuation">(</span>scl<span class="token punctuation">,</span> <span class="token class-name">Reflection</span><span class="token punctuation">.</span><span class="token function">getCallerClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> scl<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">initSystemClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>sclSet<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>Launcher</span> l <span class="token operator">=</span> <span class="token class-name"><span class="token namespace">sun<span class="token punctuation">.</span>misc<span class="token punctuation">.</span></span>Launcher</span><span class="token punctuation">.</span><span class="token function">getLauncher</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>l <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">Throwable</span> oops <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
                scl <span class="token operator">=</span> l<span class="token punctuation">.</span><span class="token function">getClassLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行代码测试，返回的是应用类加载器。</p> <div class="language-bash extra-class"><pre class="language-bash"><code>// sun.misc.Launcher<span class="token variable">$AppClassLoader</span>@18b4aac2
@Test
public void <span class="token function-name function">run66</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	System.out.println<span class="token punctuation">(</span>ClassLoader.getSystemClassLoader<span class="token punctuation">(</span><span class="token punctuation">))</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这三个类加载器负责不同路径下的类加载。</p> <h3 id="启动类加载器介绍"><a href="#启动类加载器介绍" class="header-anchor">#</a> 启动类加载器介绍</h3> <p><code>启动类加载器 BootClassLoader</code> 负责<code>System.getProperty(&quot;sun.boot.class.path&quot;)</code> 的类加载。也即是以下类。</p> <p><code>${JAVA_HOME}/jre/lib/*.jar</code> 和 <code>${JAVA_HOME}/jre/classes</code> 类的加载。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token operator">/</span><span class="token class-name">Library</span><span class="token operator">/</span><span class="token class-name">Java</span><span class="token operator">/</span><span class="token class-name">JavaVirtualMachines</span><span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_231</span><span class="token punctuation">.</span>jdk<span class="token operator">/</span><span class="token class-name">Contents</span><span class="token operator">/</span><span class="token class-name">Home</span><span class="token operator">/</span>jre<span class="token operator">/</span>lib<span class="token operator">/</span>resources<span class="token punctuation">.</span>jar
<span class="token operator">/</span><span class="token class-name">Library</span><span class="token operator">/</span><span class="token class-name">Java</span><span class="token operator">/</span><span class="token class-name">JavaVirtualMachines</span><span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_231</span><span class="token punctuation">.</span>jdk<span class="token operator">/</span><span class="token class-name">Contents</span><span class="token operator">/</span><span class="token class-name">Home</span><span class="token operator">/</span>jre<span class="token operator">/</span>lib<span class="token operator">/</span>rt<span class="token punctuation">.</span>jar
<span class="token operator">/</span><span class="token class-name">Library</span><span class="token operator">/</span><span class="token class-name">Java</span><span class="token operator">/</span><span class="token class-name">JavaVirtualMachines</span><span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_231</span><span class="token punctuation">.</span>jdk<span class="token operator">/</span><span class="token class-name">Contents</span><span class="token operator">/</span><span class="token class-name">Home</span><span class="token operator">/</span>jre<span class="token operator">/</span>lib<span class="token operator">/</span>sunrsasign<span class="token punctuation">.</span>jar
<span class="token operator">/</span><span class="token class-name">Library</span><span class="token operator">/</span><span class="token class-name">Java</span><span class="token operator">/</span><span class="token class-name">JavaVirtualMachines</span><span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_231</span><span class="token punctuation">.</span>jdk<span class="token operator">/</span><span class="token class-name">Contents</span><span class="token operator">/</span><span class="token class-name">Home</span><span class="token operator">/</span>jre<span class="token operator">/</span>lib<span class="token operator">/</span>jsse<span class="token punctuation">.</span>jar
<span class="token operator">/</span><span class="token class-name">Library</span><span class="token operator">/</span><span class="token class-name">Java</span><span class="token operator">/</span><span class="token class-name">JavaVirtualMachines</span><span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_231</span><span class="token punctuation">.</span>jdk<span class="token operator">/</span><span class="token class-name">Contents</span><span class="token operator">/</span><span class="token class-name">Home</span><span class="token operator">/</span>jre<span class="token operator">/</span>lib<span class="token operator">/</span>jce<span class="token punctuation">.</span>jar
<span class="token operator">/</span><span class="token class-name">Library</span><span class="token operator">/</span><span class="token class-name">Java</span><span class="token operator">/</span><span class="token class-name">JavaVirtualMachines</span><span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_231</span><span class="token punctuation">.</span>jdk<span class="token operator">/</span><span class="token class-name">Contents</span><span class="token operator">/</span><span class="token class-name">Home</span><span class="token operator">/</span>jre<span class="token operator">/</span>lib<span class="token operator">/</span>charsets<span class="token punctuation">.</span>jar
<span class="token operator">/</span><span class="token class-name">Library</span><span class="token operator">/</span><span class="token class-name">Java</span><span class="token operator">/</span><span class="token class-name">JavaVirtualMachines</span><span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_231</span><span class="token punctuation">.</span>jdk<span class="token operator">/</span><span class="token class-name">Contents</span><span class="token operator">/</span><span class="token class-name">Home</span><span class="token operator">/</span>jre<span class="token operator">/</span>lib<span class="token operator">/</span>jfr<span class="token punctuation">.</span>jar
<span class="token operator">/</span><span class="token class-name">Library</span><span class="token operator">/</span><span class="token class-name">Java</span><span class="token operator">/</span><span class="token class-name">JavaVirtualMachines</span><span class="token operator">/</span>jdk1<span class="token punctuation">.</span><span class="token number">8.0_231</span><span class="token punctuation">.</span>jdk<span class="token operator">/</span><span class="token class-name">Contents</span><span class="token operator">/</span><span class="token class-name">Home</span><span class="token operator">/</span>jre<span class="token operator">/</span>classes
</code></pre></div><div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run77</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">URLClassPath</span> bootstrapClassPath <span class="token operator">=</span> <span class="token class-name">Launcher</span><span class="token punctuation">.</span><span class="token function">getBootstrapClassPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token constant">URL</span><span class="token punctuation">[</span><span class="token punctuation">]</span> urLs <span class="token operator">=</span> bootstrapClassPath<span class="token punctuation">.</span><span class="token function">getURLs</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>urLs<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item<span class="token operator">-&gt;</span><span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>item<span class="token punctuation">.</span><span class="token function">getFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="扩展类加载器"><a href="#扩展类加载器" class="header-anchor">#</a> 扩展类加载器</h3> <p><code>扩展类加载器 sun.misc.Launcher.ExtClassLoader</code> 为加载 <code>System.getProperty(&quot;java.ext.dirs&quot;)</code> 中的类。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run99</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">final</span> <span class="token class-name">String</span> property <span class="token operator">=</span> <span class="token class-name">System</span><span class="token punctuation">.</span><span class="token function">getProperty</span><span class="token punctuation">(</span><span class="token string">&quot;java.ext.dirs&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">final</span> <span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> split <span class="token operator">=</span> property<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span><span class="token string">&quot;:&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token class-name">Stream</span><span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span>split<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>item <span class="token operator">-&gt;</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-txt extra-class"><pre class="language-txt"><code>/Users/zhangpanqin/Library/Java/Extensions
/Library/Java/JavaVirtualMachines/jdk1.8.0_231.jdk/Contents/Home/jre/lib/ext
/Library/Java/Extensions
/Network/Library/Java/Extensions
/System/Library/Java/Extensions
/usr/lib/java
</code></pre></div><h3 id="应用类加载器"><a href="#应用类加载器" class="header-anchor">#</a> 应用类加载器</h3> <p><code>应用类加载器 sun.misc.Launcher.AppClassLoader</code> 加载 <code>System.getProperty(&quot;java.class.path&quot;);</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># -cp 指定 classpath 路径，多个路径可以使用 : 分开（linux 下为 :,window 下为 ;），</span>
<span class="token function">java</span> <span class="token parameter variable">-cp</span> /Users/zhangpanqin/github/fly-java/target/classes com.fly.study.java.classloader.Test2

</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/zhangpanqin/mflyyou/edit/main/docs/java/base/how-to-read-file-in-java.md" target="_blank" rel="noopener noreferrer">在 GitHub 上编辑此页</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/3/24 下午12:28:55</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
            ←
            <a href="/java/base/java-reference.html" class="prev">
                java 中强软弱虚引用的妙用
            </a></span> <span class="next"><a href="/java/base/java-asynchronous-programming.html">
                java 异步编程
            </a>
            →
        </span></p></div> </main> <aside class="right-sidebar"> <div class="right-sidebar-toc-container" style="display:;"><div class="pos-box"><div class="icon-arrow"></div> <div class="scroll-box" style="max-height:650px"><div style="font-weight:bold;text-align:center;">Java-中读取文件内容的-n-中方式</div> <hr> <div class="toc-box"><ul><li><a href="/java/base/how-to-read-file-in-java.html#前言" class="toc-sidebar-link">前言</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#本文设计内容" class="toc-sidebar-link">本文设计内容</a></li></ul></li><li><a href="/java/base/how-to-read-file-in-java.html#基于-file-获取文件内容" class="toc-sidebar-link">基于 File 获取文件内容</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#获取绝对路径文件内容" class="toc-sidebar-link">获取绝对路径文件内容</a></li><li class="toc-sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#获取-jarfile-中的内容" class="toc-sidebar-link">获取 JarFile 中的内容</a></li><li class="toc-sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#获取相对路径的内容" class="toc-sidebar-link">获取相对路径的内容</a></li></ul></li><li><a href="/java/base/how-to-read-file-in-java.html#nio-读取文件内容" class="toc-sidebar-link">nio 读取文件内容</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#获取绝对路径内容" class="toc-sidebar-link">获取绝对路径内容</a></li><li class="toc-sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#获取相对路径内容" class="toc-sidebar-link">获取相对路径内容</a></li></ul></li><li><a href="/java/base/how-to-read-file-in-java.html#基于-classloader-获取文件内容" class="toc-sidebar-link">基于 ClassLoader 获取文件内容</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#classloader-getresourceasstream" class="toc-sidebar-link">ClassLoader.getResourceAsStream</a></li><li class="toc-sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#class-getresourceasstream" class="toc-sidebar-link">Class.getResourceAsStream</a></li><li class="toc-sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#" class="toc-sidebar-link"></a></li></ul></li><li><a href="/java/base/how-to-read-file-in-java.html#类加载器" class="toc-sidebar-link">类加载器</a><ul class="toc-sidebar-sub-headers"><li class="toc-sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#启动类加载器介绍" class="toc-sidebar-link">启动类加载器介绍</a></li><li class="toc-sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#扩展类加载器" class="toc-sidebar-link">扩展类加载器</a></li><li class="toc-sidebar-sub-header"><a href="/java/base/how-to-read-file-in-java.html#应用类加载器" class="toc-sidebar-link">应用类加载器</a></li></ul></li></ul></div></div></div></div> <div class="right-sidebar-toolbar"><div class="option-box"><img src="/images/system/toc.png" class="nozoom"> <span class="show-txt">目录</span></div> <div class="option-box"><img src="/images/system/toggle.png" width="30px" class="nozoom"> <span class="show-txt">左栏</span></div> <div title="java 中强软弱虚引用的妙用" class="option-box" style="padding-left:2px;text-align:center;"><a href="/java/base/java-reference.html"><img src="/images/system/pre2.png" width="30px" class="nozoom"> <span class="show-txt">上一篇</span></a></div> <div title="java 异步编程" class="option-box" style="padding-left:2px;text-align:center;"><a href="/java/base/java-asynchronous-programming.html"><img src="/images/system/next2.png" width="30px" class="nozoom"> <span class="show-txt">下一篇</span></a></div></div> </aside></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.c876b023.js" defer></script><script src="/assets/js/5.f1c50b28.js" defer></script><script src="/assets/js/2.85c620a8.js" defer></script><script src="/assets/js/66.842b0f76.js" defer></script><script src="/assets/js/11.66cb8558.js" defer></script>
  </body>
</html>
