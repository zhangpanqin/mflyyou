(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{359:function(t,a,s){t.exports=s.p+"assets/img/image-20240705095840208.60d0522a.png"},456:function(t,a,s){"use strict";s.r(a);var n=s(9),e=Object(n.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"jackson"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jackson"}},[t._v("#")]),t._v(" Jackson")]),t._v(" "),a("h2",{attrs:{id:"核心概念介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#核心概念介绍"}},[t._v("#")]),t._v(" 核心概念介绍")]),t._v(" "),a("h4",{attrs:{id:"objectmapper"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#objectmapper"}},[t._v("#")]),t._v(" ObjectMapper")]),t._v(" "),a("p",[a("code",[t._v("ObjectMapper")]),t._v(" 是 Jackson 的核心类，用于执行序列化和反序列化操作。它提供了大量的配置选项和方法来转换 JSON 和 Java 对象。")]),t._v(" "),a("h4",{attrs:{id:"jsonparser-和-jsongenerator"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsonparser-和-jsongenerator"}},[t._v("#")]),t._v(" JsonParser 和 JsonGenerator")]),t._v(" "),a("p",[a("code",[t._v("JsonParser")]),t._v(" 和 "),a("code",[t._v("JsonGenerator")]),t._v(" 是 Jackson 的低级别 API，分别用于解析 JSON 和生成 JSON。这两个类提供了对 JSON 数据流的逐步读取和写入能力。")]),t._v(" "),a("h4",{attrs:{id:"jsonnode"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsonnode"}},[t._v("#")]),t._v(" JsonNode")]),t._v(" "),a("p",[a("code",[t._v("JsonNode")]),t._v(" 是一个树模型类，表示 JSON 数据的树状结构。通过 "),a("code",[t._v("ObjectMapper")]),t._v(" 可以将 JSON 字符串解析为 "),a("code",[t._v("JsonNode")]),t._v("，或者将 "),a("code",[t._v("JsonNode")]),t._v(" 序列化为 JSON 字符串。")]),t._v(" "),a("h4",{attrs:{id:"serializer-和-deserializer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serializer-和-deserializer"}},[t._v("#")]),t._v(" Serializer 和 Deserializer")]),t._v(" "),a("p",[a("code",[t._v("JsonSerializer")]),t._v(" 和 "),a("code",[t._v("JsonDeserializer")]),t._v(" 是用于自定义序列化和反序列化逻辑的类。通过实现这些类，可以控制对象如何被转换为 JSON，以及 JSON 如何被转换为对象。")]),t._v(" "),a("h4",{attrs:{id:"module"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#module"}},[t._v("#")]),t._v(" Module")]),t._v(" "),a("p",[t._v("Jackson 允许注册自定义模块 ("),a("code",[t._v("Module")]),t._v(")，这些模块可以包含自定义序列化器、反序列化器、混合类等。")]),t._v(" "),a("h4",{attrs:{id:"beanserializermodifier"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beanserializermodifier"}},[t._v("#")]),t._v(" BeanSerializerModifier")]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("BeanSerializerModifier")]),t._v(" 可以修改 Jackson 的序列化过程，例如更改属性的序列化器，添加或删除属性等。")]),t._v(" "),a("h3",{attrs:{id:"序列化和反序列化过程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#序列化和反序列化过程"}},[t._v("#")]),t._v(" 序列化和反序列化过程")]),t._v(" "),a("p",[a("img",{attrs:{src:s(359),alt:"image-20240705095840208"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"READMD.assets/image-20240705095906386.png",alt:"image-20240705095906386"}})]),t._v(" "),a("h2",{attrs:{id:"敏感数据-脱敏"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#敏感数据-脱敏"}},[t._v("#")]),t._v(" 敏感数据，脱敏")]),t._v(" "),a("ol",[a("li",[t._v("定义注解")]),t._v(" "),a("li",[t._v("实现 AnnotationIntrospector 专门处理这个注解")]),t._v(" "),a("li",[t._v("实现 JsonSerializer 去做数据脱敏")]),t._v(" "),a("li",[t._v("实现一个Module 将这个模块注入到 Jackson")])]),t._v(" "),a("p",[t._v("代码参考 "),a("a",{attrs:{href:"https://github.com/zhangpanqin/fly-jackson/blob/main/jackson-case/src/main/java/com/mflyyou/filter/MyAnnotationIntrospectorModule.java",target:"_blank",rel:"noopener noreferrer"}},[t._v("MyAnnotationIntrospectorModule"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"jackson-的使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jackson-的使用"}},[t._v("#")]),t._v(" Jackson 的使用")]),t._v(" "),a("h3",{attrs:{id:"jsoncreator"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsoncreator"}},[t._v("#")]),t._v(" JsonCreator")]),t._v(" "),a("p",[t._v("用于反序列化为对象，比如 SpringBoot 默认使用字面量，转换字符串到枚举。")]),t._v(" "),a("p",[t._v("如果我们想自定义转换，可以按一下操作")]),t._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Getter")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("enum")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SexEnum")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("BOY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"男"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("GIRL")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"女"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SexEnum")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" desc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("desc "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" desc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@JsonCreator")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("mode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("DELEGATING")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("static")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SexEnum")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("of")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@JsonProperty")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"code"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SexEnum")]),t._v(" value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("values")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("equals")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n            "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" code"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("final")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" desc"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"jsonvalue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jsonvalue"}},[t._v("#")]),t._v(" JsonValue")]),t._v(" "),a("p",[t._v("制定序列化的字段")]),t._v(" "),a("h2",{attrs:{id:"mapped-diagnostic-context"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mapped-diagnostic-context"}},[t._v("#")]),t._v(" Mapped Diagnostic Context")]),t._v(" "),a("p",[t._v("MDC 的使用，在使用线程池的时候，会丢失信息。\n"),a("a",{attrs:{href:"https://logback.qos.ch/manual/mdc.html#managedThreads",target:"_blank",rel:"noopener noreferrer"}},[t._v("线程池使用"),a("OutboundLink")],1)]),t._v(" "),a("h3",{attrs:{id:"打印请求的信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#打印请求的信息"}},[t._v("#")]),t._v(" 打印请求的信息")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://logback.qos.ch/manual/mdc.html#mis",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDCInsertingServletFilter"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);